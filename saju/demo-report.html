<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>ì‚¬ì£¼ ë¦¬í¬íŠ¸ | AI ì‚¬ì£¼ Ã— MBTI</title>
    <meta name="description" content="AI ì‚¬ì£¼ Ã— MBTI ìƒì„¸ ë¦¬í¬íŠ¸. ì‚¬ì£¼íŒ”ì(ì—°/ì›”/ì¼/ì‹œ), ì˜¤í–‰ ë°¸ëŸ°ìŠ¤, ìš©ì‹ /ê¸°ì‹ , ì‹­ì‹ , MBTI ìœµí•©ê¹Œì§€ í•œ ë²ˆì—." />
    <meta name="robots" content="noindex,follow" />
    <link rel="canonical" href="https://im7873384-wq.github.io/jaehong-lotto/saju/" />

    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="ì¬í™ ì‚¬ì£¼" />
    <meta property="og:title" content="ì‚¬ì£¼ ë¦¬í¬íŠ¸ | AI ì‚¬ì£¼ Ã— MBTI" />
    <meta property="og:description" content="ì‚¬ì£¼íŒ”ì/ì˜¤í–‰/ìš©ì‹ /ì‹­ì‹ /MBTIë¥¼ â€˜ì‰½ê²Œâ€™ ì •ë¦¬í•œ ë¦¬í¬íŠ¸." />
    <meta property="og:url" content="https://im7873384-wq.github.io/jaehong-lotto/saju/" />
    <meta property="og:image" content="https://im7873384-wq.github.io/jaehong-lotto/og/og-saju.svg" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="ì‚¬ì£¼ ë¦¬í¬íŠ¸ | AI ì‚¬ì£¼ Ã— MBTI" />
    <meta name="twitter:description" content="ì‚¬ì£¼íŒ”ì/ì˜¤í–‰/ìš©ì‹ /ì‹­ì‹ /MBTIë¥¼ â€˜ì‰½ê²Œâ€™ ì •ë¦¬í•œ ë¦¬í¬íŠ¸." />
    <meta name="twitter:image" content="https://im7873384-wq.github.io/jaehong-lotto/og/og-saju.svg" />

    <link rel="stylesheet" href="../nav.css">

    <!-- ì‚¬ì£¼ ì—”ì§„ ë¡œë“œ -->
    <script src="saju-engine.js"></script>
    <script src="personal-analysis.js"></script>

    <!-- ì¶”ê°€ ì—”ì§„ ì•ˆì „ ë¡œë“œ -->
    <script>
    (function() {
        const additionalScripts = [
            'enhanced-saju-engine.js',
            'professional-analysis.js'
        ];
        
        additionalScripts.forEach(scriptSrc => {
            try {
                const script = document.createElement('script');
                script.src = scriptSrc;
                script.onerror = function() {
                    console.warn(scriptSrc + ' ë¡œë“œ ì‹¤íŒ¨ - ê¸°ë³¸ ê¸°ëŠ¥ìœ¼ë¡œ ë™ì‘');
                };
                document.head.appendChild(script);
            } catch (e) {
                console.warn(scriptSrc + ' ë¡œë“œ ì¤‘ ì˜¤ë¥˜:', e);
            }
        });
    })();
    </script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Apple SD Gothic Neo', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Noto Sans KR', sans-serif; 
            line-height: 1.7; 
            background: #f7f8fc; 
            color: #2c3e50;
        }

        .container { 
            max-width: 900px; 
            margin: 0 auto; 
            padding: 30px 20px; 
        }

        /* í—¤ë” */
        .report-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 10px 40px rgba(102, 126, 234, 0.3);
        }

        .report-header h1 {
            font-size: 1.8rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .report-header .user-info {
            font-size: 1.1rem;
            opacity: 0.95;
            margin-bottom: 20px;
        }

        .score-display {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .score-item {
            background: rgba(255,255,255,0.15);
            padding: 15px 25px;
            border-radius: 12px;
            text-align: center;
            min-width: 100px;
        }

        .score-item .label {
            font-size: 0.85rem;
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .score-item .value {
            font-size: 1.8rem;
            font-weight: 800;
        }

        /* ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            padding: 25px;
            border-radius: 16px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            border-left: 4px solid;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }

        .card h3 {
            font-size: 1rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card-score {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 8px;
        }

        .card-trend {
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .card-desc {
            color: #6b7280;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .card.love { border-left-color: #ef4444; }
        .card.love h3, .card.love .card-score { color: #dc2626; }

        .card.career { border-left-color: #3b82f6; }
        .card.career h3, .card.career .card-score { color: #2563eb; }

        .card.wealth { border-left-color: #eab308; }
        .card.wealth h3, .card.wealth .card-score { color: #ca8a04; }

        .card.health { border-left-color: #22c55e; }
        .card.health h3, .card.health .card-score { color: #16a34a; }

        .trend-up { color: #059669; }
        .trend-stable { color: #6b7280; }
        .trend-down { color: #dc2626; }

        /* ë¶„ì„ ì„¹ì…˜ */
        .analysis-section {
            background: white;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            margin-bottom: 25px;
        }

        .analysis-section h3 {
            color: #667eea;
            font-size: 1.3rem;
            margin-bottom: 20px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .analysis-section p {
            color: #4b5563;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .analysis-section ul {
            margin: 15px 0;
            padding-left: 20px;
        }

        .analysis-section li {
            margin-bottom: 8px;
            color: #4b5563;
        }

        /* ì‚¬ì£¼íŒ”ì í‘œì‹œ */
        .saju-display {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .pillar {
            background: #f8fafc;
            padding: 20px 15px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid #e5e7eb;
        }

        .pillar-title {
            font-size: 0.85rem;
            color: #6b7280;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .pillar-chinese {
            font-size: 1.8rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 5px;
        }

        .pillar-korean {
            font-size: 0.9rem;
            color: #4b5563;
        }

        /* ì˜¤í–‰ ë°” */
        .element-bars {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 12px;
            margin: 20px 0;
        }

        .element-bar {
            text-align: center;
        }

        .element-bar .label {
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .element-bar .bar-container {
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
        }

        .element-bar .bar-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .element-bar .percentage {
            font-size: 0.8rem;
            color: #6b7280;
            margin-top: 5px;
        }

        .element-wood .label { color: #059669; }
        .element-wood .bar-fill { background: #059669; }
        .element-fire .label { color: #dc2626; }
        .element-fire .bar-fill { background: #dc2626; }
        .element-earth .label { color: #d97706; }
        .element-earth .bar-fill { background: #d97706; }
        .element-metal .label { color: #6b7280; }
        .element-metal .bar-fill { background: #6b7280; }
        .element-water .label { color: #0ea5e9; }
        .element-water .bar-fill { background: #0ea5e9; }

        /* ì¡°ì–¸ ê·¸ë¦¬ë“œ */
        .advice-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 15px;
        }

        .advice-card {
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid;
        }

        .advice-card h4 {
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .advice-card p {
            font-size: 0.9rem;
            line-height: 1.5;
            color: #4b5563;
            margin: 0;
        }

        .advice-love { background: #fef2f2; border-left-color: #ef4444; }
        .advice-love h4 { color: #dc2626; }

        .advice-career { background: #eff6ff; border-left-color: #3b82f6; }
        .advice-career h4 { color: #2563eb; }

        .advice-wealth { background: #fefce8; border-left-color: #eab308; }
        .advice-wealth h4 { color: #ca8a04; }

        .advice-health { background: #f0fdf4; border-left-color: #22c55e; }
        .advice-health h4 { color: #16a34a; }

        /* ë²„íŠ¼ */
        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin: 40px 0 20px;
        }

        .btn {
            padding: 14px 28px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .btn-secondary:hover {
            background: #667eea;
            color: white;
        }

        /* í‘¸í„° */
        .footer {
            text-align: center;
            padding: 30px;
            color: #9ca3af;
            font-size: 0.85rem;
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 768px) {
            .container { padding: 20px 15px; }
            .report-header { padding: 30px 20px; }
            .report-header h1 { font-size: 1.5rem; }
            .cards-grid { grid-template-columns: 1fr 1fr; }
            .saju-display { grid-template-columns: repeat(2, 1fr); }
            .element-bars { grid-template-columns: repeat(5, 1fr); gap: 8px; }
            .element-bar .label { font-size: 0.8rem; }
            .analysis-section { padding: 20px; }
            .advice-grid { grid-template-columns: 1fr; }
        }

        @media (max-width: 480px) {
            .cards-grid { grid-template-columns: 1fr; }
            .score-display { flex-direction: column; align-items: center; }
        }

        /* ì• ë‹ˆë©”ì´ì…˜ */
        .fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ë¡œë”© */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255,255,255,0.95);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #e5e7eb;
            border-top-color: #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            margin-top: 20px;
            font-size: 1.1rem;
            color: #4b5563;
        }
    </style>
</head>
<body>
    <nav class="top-nav">
        <a href="/jaehong-lotto/">í™ˆ</a>
        <a href="/jaehong-lotto/lotto/">ë¡œë˜</a>
        <a href="/jaehong-lotto/saju/">ì‚¬ì£¼</a>
    </nav>

    <!-- ë¡œë”© ì˜¤ë²„ë ˆì´ -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-spinner"></div>
        <p class="loading-text">ğŸ”® ì‚¬ì£¼ ë¶„ì„ ì¤‘...</p>
    </div>

    <div class="container" id="mainContent" style="display: none;">
        <!-- í—¤ë” -->
        <div class="report-header fade-in">
            <h1 id="reportTitle">ì‚¬ì£¼ ë¶„ì„ ê²°ê³¼</h1>
            <p class="user-info" id="userInfo"></p>

            <div style="margin-top:14px; display:flex; gap:10px; justify-content:center; flex-wrap:wrap;">
                <button id="shareCopy" style="border:0; cursor:pointer; padding:10px 14px; border-radius:12px; font-weight:800; background:#ffffff; color:#4c1d95;">ğŸ”— ë§í¬ ë³µì‚¬</button>
                <a href="index.html" style="text-decoration:none; padding:10px 14px; border-radius:12px; font-weight:800; background:rgba(255,255,255,0.18); color:#fff; border:1px solid rgba(255,255,255,0.35);">â†©ï¸ ë‹¤ì‹œ ë¶„ì„</a>
            </div>
            <div style="margin-top:10px; font-size:0.9rem; opacity:0.9;">ê³µìœ í•´ì„œ ì¹œêµ¬ë‘ ê°™ì´ ë³´ê¸°</div>
            
            <div class="score-display">
                <div class="score-item">
                    <div class="label">ì¢…í•© ìš´ì„¸</div>
                    <div class="value" id="totalScore">--</div>
                </div>
                <div class="score-item">
                    <div class="label">ì—°ì• ìš´</div>
                    <div class="value" id="headerLoveScore">--</div>
                </div>
                <div class="score-item">
                    <div class="label">ì§ì—…ìš´</div>
                    <div class="value" id="headerCareerScore">--</div>
                </div>
                <div class="score-item">
                    <div class="label">ì¬ë¬¼ìš´</div>
                    <div class="value" id="headerWealthScore">--</div>
                </div>
            </div>
        </div>

        <!-- ìš´ì„¸ ì¹´ë“œ -->
        <div class="cards-grid fade-in">
            <div class="card love">
                <h3>ğŸ’ ì—°ì• ìš´</h3>
                <div class="card-score" id="loveScore">--</div>
                <div class="card-trend" id="loveTrend">ë¶„ì„ì¤‘</div>
                <p class="card-desc" id="loveDesc">ë¶„ì„ì¤‘...</p>
            </div>
            
            <div class="card career">
                <h3>ğŸ’¼ ì§ì—…ìš´</h3>
                <div class="card-score" id="careerScore">--</div>
                <div class="card-trend" id="careerTrend">ë¶„ì„ì¤‘</div>
                <p class="card-desc" id="careerDesc">ë¶„ì„ì¤‘...</p>
            </div>
            
            <div class="card wealth">
                <h3>ğŸ’° ì¬ë¬¼ìš´</h3>
                <div class="card-score" id="wealthScore">--</div>
                <div class="card-trend" id="wealthTrend">ë¶„ì„ì¤‘</div>
                <p class="card-desc" id="wealthDesc">ë¶„ì„ì¤‘...</p>
            </div>
            
            <div class="card health">
                <h3>ğŸƒ ê±´ê°•ìš´</h3>
                <div class="card-score" id="healthScore">--</div>
                <div class="card-trend" id="healthTrend">ë¶„ì„ì¤‘</div>
                <p class="card-desc" id="healthDesc">ë¶„ì„ì¤‘...</p>
            </div>
        </div>

        <!-- ì‚¬ì£¼íŒ”ì -->
        <div class="analysis-section fade-in">
            <h3>ğŸ“Š ì‚¬ì£¼íŒ”ì (å››æŸ±å…«å­—)</h3>
            <div class="saju-display" id="sajuDisplay">
                <div class="pillar">
                    <div class="pillar-title">ì—°ì£¼ (å¹´æŸ±)</div>
                    <div class="pillar-chinese" id="yearPillar">--</div>
                    <div class="pillar-korean" id="yearPillarKr">--</div>
                </div>
                <div class="pillar">
                    <div class="pillar-title">ì›”ì£¼ (æœˆæŸ±)</div>
                    <div class="pillar-chinese" id="monthPillar">--</div>
                    <div class="pillar-korean" id="monthPillarKr">--</div>
                </div>
                <div class="pillar">
                    <div class="pillar-title">ì¼ì£¼ (æ—¥æŸ±)</div>
                    <div class="pillar-chinese" id="dayPillar">--</div>
                    <div class="pillar-korean" id="dayPillarKr">--</div>
                </div>
                <div class="pillar">
                    <div class="pillar-title">ì‹œì£¼ (æ™‚æŸ±)</div>
                    <div class="pillar-chinese" id="timePillar">--</div>
                    <div class="pillar-korean" id="timePillarKr">--</div>
                </div>
            </div>
            <p id="sajuSummary" style="margin-top: 20px; text-align: center; color: #4b5563;"></p>
        </div>

        <!-- ì˜¤í–‰ ë¶„ì„ -->
        <div class="analysis-section fade-in">
            <h3>âš–ï¸ ì˜¤í–‰ ê· í˜• ë¶„ì„</h3>
            <div class="element-bars">
                <div class="element-bar element-wood">
                    <div class="label">ëª©(æœ¨)</div>
                    <div class="bar-container">
                        <div class="bar-fill" id="woodBar" style="width: 0%"></div>
                    </div>
                    <div class="percentage" id="woodPercent">0%</div>
                </div>
                <div class="element-bar element-fire">
                    <div class="label">í™”(ç«)</div>
                    <div class="bar-container">
                        <div class="bar-fill" id="fireBar" style="width: 0%"></div>
                    </div>
                    <div class="percentage" id="firePercent">0%</div>
                </div>
                <div class="element-bar element-earth">
                    <div class="label">í† (åœŸ)</div>
                    <div class="bar-container">
                        <div class="bar-fill" id="earthBar" style="width: 0%"></div>
                    </div>
                    <div class="percentage" id="earthPercent">0%</div>
                </div>
                <div class="element-bar element-metal">
                    <div class="label">ê¸ˆ(é‡‘)</div>
                    <div class="bar-container">
                        <div class="bar-fill" id="metalBar" style="width: 0%"></div>
                    </div>
                    <div class="percentage" id="metalPercent">0%</div>
                </div>
                <div class="element-bar element-water">
                    <div class="label">ìˆ˜(æ°´)</div>
                    <div class="bar-container">
                        <div class="bar-fill" id="waterBar" style="width: 0%"></div>
                    </div>
                    <div class="percentage" id="waterPercent">0%</div>
                </div>
            </div>
            <p id="elementSummary" style="margin-top: 15px; text-align: center; color: #4b5563;"></p>

            <div id="elementDeepDive" style="margin-top:16px; padding:16px; border-radius:14px; background:#f8fafc; border:1px solid #e5e7eb;">
                <div style="font-weight:900; color:#111827;">ğŸ”¥ ë„ˆì˜ ì˜¤í–‰ ë°¸ëŸ°ìŠ¤ í•œ ë²ˆì— ì •ë¦¬</div>
                <div id="elementDeepText" style="margin-top:10px; color:#374151; line-height:1.65; white-space:pre-line;">ë¶„ì„ì¤‘...</div>
                <div id="elementActionTip" style="margin-top:12px; font-weight:800; color:#4c1d95;">âœ… ì•¡ì…˜íŒ: ë¶„ì„ì¤‘...</div>
            </div>
        </div>

        <!-- ì„±ê²© ë¶„ì„ -->
        <div class="analysis-section fade-in">
            <h3>ğŸ­ ì„±ê²© ë¶„ì„</h3>
            <div id="personalityAnalysis">
                <p>ë¶„ì„ì¤‘...</p>
            </div>
        </div>

        <!-- MBTI ì—°ë™ -->
        <div class="analysis-section fade-in" id="mbtiSection" style="display: none;">
            <h3>ğŸ§  MBTI Ã— ì‚¬ì£¼ ìœµí•© ë¶„ì„</h3>
            <div id="mbtiAnalysis">
                <p>ë¶„ì„ì¤‘...</p>
            </div>
        </div>

        <!-- ì‹­ì‹ (3ë²ˆ) -->
        <div class="analysis-section fade-in">
            <h3>ğŸ§© ë‚´ ì‚¬ì£¼ì˜ ìºë¦­í„°(ì‹­ì‹ )</h3>
            <div id="tenGodsAnalysis">
                <p>ë¶„ì„ì¤‘...</p>
            </div>
        </div>

        <!-- ìš©ì‹ /ê¸°ì‹  -->
        <div class="analysis-section fade-in">
            <h3>ğŸŒŸ ìš©ì‹  & ê¸°ì‹  ë¶„ì„</h3>
            <div id="yongsinAnalysis">
                <p>ë¶„ì„ì¤‘...</p>
            </div>
        </div>

        <!-- ë§ì¶¤ ì¡°ì–¸ -->
        <div class="analysis-section fade-in">
            <h3>â­ ë§ì¶¤ ì¡°ì–¸</h3>
            <div class="advice-grid">
                <div class="advice-card advice-love">
                    <h4>ğŸ’ ì—°ì•  ì¡°ì–¸</h4>
                    <p id="loveAdvice">ë¶„ì„ì¤‘...</p>
                </div>
                <div class="advice-card advice-career">
                    <h4>ğŸ’¼ ì§ì—… ì¡°ì–¸</h4>
                    <p id="careerAdvice">ë¶„ì„ì¤‘...</p>
                </div>
                <div class="advice-card advice-wealth">
                    <h4>ğŸ’° ì¬ë¬¼ ì¡°ì–¸</h4>
                    <p id="wealthAdvice">ë¶„ì„ì¤‘...</p>
                </div>
                <div class="advice-card advice-health">
                    <h4>ğŸƒ ê±´ê°• ì¡°ì–¸</h4>
                    <p id="healthAdvice">ë¶„ì„ì¤‘...</p>
                </div>
            </div>
        </div>

        <!-- ë²„íŠ¼ -->
        <div class="action-buttons">
            <a href="index.html" class="btn btn-primary">ğŸ”„ ë‹¤ì‹œ ë¶„ì„í•˜ê¸°</a>
            <button class="btn btn-secondary" onclick="shareResult()">ğŸ“± ê²°ê³¼ ê³µìœ í•˜ê¸°</button>
        </div>

        <!-- í‘¸í„° -->
        <div class="footer">
            <p>ğŸŒŸ ì´ ë¶„ì„ ê²°ê³¼ê°€ ë„ì›€ì´ ë˜ì…¨ë‚˜ìš”?</p>
            <p style="margin-top: 10px;">Â© 2024 AI ì‚¬ì£¼ Ã— MBTI. ëª¨ë“  ë¶„ì„ ê²°ê³¼ëŠ” ì°¸ê³ ìš©ì…ë‹ˆë‹¤.</p>
        </div>
    </div>

    <script>
        // í—¤ë” "ë§í¬ ë³µì‚¬" ë²„íŠ¼ ë°”ì¸ë”©
        document.addEventListener('DOMContentLoaded', function() {
            const btn = document.getElementById('shareCopy');
            if (btn) {
                btn.addEventListener('click', function() {
                    copyToClipboard(window.location.href);
                });
            }
        });

        // URL íŒŒë¼ë¯¸í„° íŒŒì‹± (í•œê¸€ ì´ë¦„ decodeURIComponent)
        function parseURLParameters() {
            const params = new URLSearchParams(window.location.search);
            const urlParams = {};
            
            for (const [key, value] of params.entries()) {
                try {
                    // nameì€ ì´ì¤‘ ì¸ì½”ë”©ë˜ì–´ ìˆì„ ìˆ˜ ìˆìŒ
                    if (key === 'name') {
                        try {
                            urlParams[key] = decodeURIComponent(decodeURIComponent(value));
                        } catch (e) {
                            urlParams[key] = decodeURIComponent(value);
                        }
                    } else {
                        urlParams[key] = decodeURIComponent(value);
                    }
                } catch (e) {
                    console.warn('URL íŒŒë¼ë¯¸í„° ë””ì½”ë”© ì‹¤íŒ¨:', key, value);
                    urlParams[key] = value;
                }
            }
            
            return urlParams;
        }

        // íŠ¸ë Œë“œ í…ìŠ¤íŠ¸ ìƒì„±
        function getTrendText(score) {
            if (score >= 85) return { text: 'â†— ë§¤ìš° ì¢‹ìŒ', class: 'trend-up' };
            if (score >= 75) return { text: 'â†— ìƒìŠ¹ì„¸', class: 'trend-up' };
            if (score >= 65) return { text: 'â†’ ì•ˆì •', class: 'trend-stable' };
            return { text: 'â†’ ë³´í†µ', class: 'trend-stable' };
        }

        // ìš´ì„¸ ì„¤ëª… ìƒì„±
        function getFortuneDescription(category, score) {
            const descriptions = {
                love: {
                    high: 'ì¢‹ì€ ë§Œë‚¨ì˜ ê¸°íšŒê°€ ë‹¤ê°€ì˜¤ê³  ìˆìŠµë‹ˆë‹¤. ìì‹ ê°ì„ ê°€ì§€ì„¸ìš”.',
                    mid: 'ê¸°ì¡´ ê´€ê³„ë¥¼ ë”ìš± ê¹Šê²Œ ë°œì „ì‹œí‚¤ëŠ”ë° ì§‘ì¤‘í•˜ì„¸ìš”.',
                    low: 'ì¸ë‚´ì‹¬ì´ í•„ìš”í•œ ì‹œê¸°ì…ë‹ˆë‹¤. ìê¸° ìì‹ ì—ê²Œ ì§‘ì¤‘í•˜ì„¸ìš”.'
                },
                career: {
                    high: 'ìƒˆë¡œìš´ ê¸°íšŒê°€ ì°¾ì•„ì˜¬ ê²ƒì…ë‹ˆë‹¤. ì ê·¹ì ìœ¼ë¡œ ë„ì „í•˜ì„¸ìš”.',
                    mid: 'í˜„ì¬ ìƒíƒœë¥¼ ìœ ì§€í•˜ë©° ê¾¸ì¤€íˆ ë°œì „í•˜ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤.',
                    low: 'ì‹ ì¤‘í•œ íŒë‹¨ì´ í•„ìš”í•œ ì‹œê¸°ì…ë‹ˆë‹¤. ì¤€ë¹„ì— ì§‘ì¤‘í•˜ì„¸ìš”.'
                },
                wealth: {
                    high: 'ìˆ˜ì… ì¦ê°€ì˜ ê¸°íšŒê°€ ë³´ì…ë‹ˆë‹¤. íˆ¬ìë¥¼ ì‹ ì¤‘íˆ ê²€í† í•˜ì„¸ìš”.',
                    mid: 'ì•ˆì •ì ì¸ ì¬ì • ê´€ë¦¬ì— ì§‘ì¤‘í•˜ë©´ ì¢‹ì€ ê²°ê³¼ê°€ ìˆìŠµë‹ˆë‹¤.',
                    low: 'ì§€ì¶œ ê´€ë¦¬ì— íŠ¹íˆ ì‹ ê²½ì“°ê³ , ì €ì¶•ì— ì§‘ì¤‘í•˜ì„¸ìš”.'
                },
                health: {
                    high: 'ì „ë°˜ì ìœ¼ë¡œ ì–‘í˜¸í•©ë‹ˆë‹¤. í™œë°œí•œ í™œë™ì„ ê¶Œì¥í•©ë‹ˆë‹¤.',
                    mid: 'ê·œì¹™ì ì¸ ê´€ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤. ê±´ê°• ìŠµê´€ì„ ìœ ì§€í•˜ì„¸ìš”.',
                    low: 'ì¶©ë¶„í•œ íœ´ì‹ê³¼ ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ì— ì‹ ê²½ì“°ì„¸ìš”.'
                }
            };

            if (score >= 80) return descriptions[category].high;
            if (score >= 65) return descriptions[category].mid;
            return descriptions[category].low;
        }

        // ë©”ì¸ ë¶„ì„ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', function() {
            const params = parseURLParameters();
            
            // í•„ìˆ˜ íŒŒë¼ë¯¸í„° ì²´í¬
            if (!params.name || !params.year || !params.month || !params.day || !params.gender) {
                alert('í•„ìˆ˜ ì •ë³´ê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                window.location.href = 'index.html';
                return;
            }

            // ë°ì´í„° íŒŒì‹±
            const userData = {
                name: params.name,
                year: parseInt(params.year),
                month: parseInt(params.month),
                day: parseInt(params.day),
                hour: params.hour === '-1' ? 12 : parseInt(params.hour), // ëª¨ë¦„ì´ë©´ ê¸°ë³¸ê°’ 12ì‹œ
                gender: params.gender,
                mbti: params.mbti || null
            };

            console.log('ì‚¬ìš©ì ë°ì´í„°:', userData);

            // ë¶„ì„ ì‹¤í–‰ (ì•½ê°„ì˜ ì§€ì—°ìœ¼ë¡œ ë¡œë”© íš¨ê³¼)
            setTimeout(function() {
                runAnalysis(userData);
            }, 1000);
        });

        function runAnalysis(userData) {
            try {
                // ì‚¬ì£¼ ê³„ì‚°
                let sajuData = null;
                if (typeof calculateSaju === 'function') {
                    sajuData = calculateSaju(userData.year, userData.month, userData.day, userData.hour, userData.gender);
                    console.log('ì‚¬ì£¼ ë°ì´í„°:', sajuData);
                }

                // ê°œì¸ ë¶„ì„ ìƒì„±
                let analysisData = null;
                if (typeof generatePersonalAnalysis === 'function' && sajuData) {
                    const birthInfo = {
                        name: userData.name,
                        year: userData.year,
                        month: userData.month,
                        day: userData.day,
                        hour: userData.hour,
                        gender: userData.gender
                    };
                    analysisData = generatePersonalAnalysis(sajuData, userData.mbti || 'ENFP', birthInfo);
                    console.log('ë¶„ì„ ë°ì´í„°:', analysisData);
                }

                // ê²°ê³¼ í‘œì‹œ
                displayResults(userData, sajuData, analysisData);

            } catch (error) {
                console.error('ë¶„ì„ ì˜¤ë¥˜:', error);
                displayFallbackResults(userData);
            }

            // ë¡œë”© ìˆ¨ê¸°ê³  ì½˜í…ì¸  í‘œì‹œ
            document.getElementById('loadingOverlay').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
        }

        function displayResults(userData, sajuData, analysisData) {
            // í—¤ë” ì •ë³´
            document.getElementById('reportTitle').textContent = userData.name + 'ë‹˜ì˜ ì‚¬ì£¼ ë¶„ì„ ê²°ê³¼';
            document.getElementById('userInfo').textContent = 
                (userData.gender === 'M' ? 'ë‚¨ì„±' : 'ì—¬ì„±') + ' Â· ' +
                userData.year + 'ë…„ ' + userData.month + 'ì›” ' + userData.day + 'ì¼ìƒ' +
                (userData.mbti ? ' Â· ' + userData.mbti : '');

            // ì ìˆ˜ ê³„ì‚° (ë¶„ì„ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ì‚¬ìš©, ì—†ìœ¼ë©´ ê¸°ë³¸ê°’)
            const scores = analysisData?.fortuneScores || {
                overall: 80,
                love: 78,
                career: 82,
                health: 75,
                wealth: 77
            };

            // í—¤ë” ì ìˆ˜
            document.getElementById('totalScore').textContent = scores.overall;
            document.getElementById('headerLoveScore').textContent = scores.love;
            document.getElementById('headerCareerScore').textContent = scores.career;
            document.getElementById('headerWealthScore').textContent = scores.wealth;

            // ì¹´ë“œ ì ìˆ˜ ë° ì„¤ëª…
            const categories = ['love', 'career', 'wealth', 'health'];
            categories.forEach(cat => {
                const score = scores[cat];
                const trend = getTrendText(score);
                
                document.getElementById(cat + 'Score').textContent = score;
                document.getElementById(cat + 'Trend').textContent = trend.text;
                document.getElementById(cat + 'Trend').className = 'card-trend ' + trend.class;
                document.getElementById(cat + 'Desc').textContent = getFortuneDescription(cat, score);
            });

            // ì‚¬ì£¼íŒ”ì í‘œì‹œ
            if (sajuData && sajuData.pillars) {
                const pillars = sajuData.pillars;
                
                document.getElementById('yearPillar').textContent = pillars.year.chinese;
                document.getElementById('yearPillarKr').textContent = pillars.year.stemName + pillars.year.branchName;
                
                document.getElementById('monthPillar').textContent = pillars.month.chinese;
                document.getElementById('monthPillarKr').textContent = pillars.month.stemName + pillars.month.branchName;
                
                document.getElementById('dayPillar').textContent = pillars.day.chinese;
                document.getElementById('dayPillarKr').textContent = pillars.day.stemName + pillars.day.branchName;
                
                document.getElementById('timePillar').textContent = pillars.time.chinese;
                document.getElementById('timePillarKr').textContent = pillars.time.stemName + pillars.time.branchName;

                document.getElementById('sajuSummary').textContent = 
                    'ì¼ê°„ ' + pillars.day.stemName + '(' + pillars.day.element + ')ìœ¼ë¡œ, ' +
                    pillars.year.animal + 'í•´ì— íƒœì–´ë‚¬ìŠµë‹ˆë‹¤. ' +
                    'ì—°ì£¼ëŠ” ì²«ì¸ìƒ/í™˜ê²½, ì›”ì£¼ëŠ” ì‚¬íšŒ/ì¼, ì¼ì£¼ëŠ” ë‚´ ì„±í–¥(í•µì‹¬), ì‹œì£¼ëŠ” ë¯¸ë˜/ì ì¬ë ¥ì„ ë´…ë‹ˆë‹¤.';
            }

            // ì˜¤í–‰ ë¶„ì„ í‘œì‹œ
            if (sajuData && sajuData.fiveElements) {
                const elements = sajuData.fiveElements.percentages;
                
                document.getElementById('woodBar').style.width = elements['ëª©'] + '%';
                document.getElementById('woodPercent').textContent = elements['ëª©'] + '%';
                
                document.getElementById('fireBar').style.width = elements['í™”'] + '%';
                document.getElementById('firePercent').textContent = elements['í™”'] + '%';
                
                document.getElementById('earthBar').style.width = elements['í† '] + '%';
                document.getElementById('earthPercent').textContent = elements['í† '] + '%';
                
                document.getElementById('metalBar').style.width = elements['ê¸ˆ'] + '%';
                document.getElementById('metalPercent').textContent = elements['ê¸ˆ'] + '%';
                
                document.getElementById('waterBar').style.width = elements['ìˆ˜'] + '%';
                document.getElementById('waterPercent').textContent = elements['ìˆ˜'] + '%';

                document.getElementById('elementSummary').textContent = 
                    sajuData.fiveElements.strongest + ' ê¸°ìš´ì´ ê°•í•˜ê³ , ' +
                    sajuData.fiveElements.weakest + ' ê¸°ìš´ì´ ì•½í•©ë‹ˆë‹¤.';

                // 2) ì˜¤í–‰ ë°¸ëŸ°ìŠ¤ í™•ì¥(ì‰¬ìš´ ì„¤ëª… + ë£¨í‹´)
                const strong = sajuData.fiveElements.strongest;
                const weak = sajuData.fiveElements.weakest;
                const map = {
                    'ëª©': { title: 'ëª©(æœ¨) ê¸°ìš´', good: 'ì•„ì´ë””ì–´/ì„±ì¥/ê´€ê³„ í™•ì¥ì— ê°•í•´. ì‹œì‘ì´ ë¹ ë¥´ê³ , ì‚¬ëŒÂ·ê¸°íšŒê°€ ì˜ ë¶™ëŠ” íƒ€ì….', tooMuch: 'ê·¼ë° ìš•ì‹¬ì´ ì»¤ì§€ë©´ ì‚°ë§Œí•´ì§€ê³  â€œí•˜ë‹¤ ë§Œ ì¼â€ì´ ëŠ˜ ìˆ˜ ìˆì–´.', add: 'ë¬¼ê±´/ì¼ì •ì€ â€œì‹œì‘â€ë³´ë‹¤ â€œë§ˆê°â€ì„ ë¨¼ì € ì¡ì•„ì£¼ëŠ” ê²Œ ë°¸ëŸ°ìŠ¤ì— ë„ì›€.', routine: 'ë§¤ì£¼ 1ê°œë§Œ â€œëë‚´ê¸° í”„ë¡œì íŠ¸â€ë¡œ ê³ ì •í•´ë´.' },
                    'í™”': { title: 'í™”(ç«) ê¸°ìš´', good: 'í‘œí˜„/ì—ë„ˆì§€/ìŠ¹ë¶€ìš•ì´ ê°•í•´. ë¶„ìœ„ê¸° ë©”ì´ì»¤ + ì¶”ì§„ë ¥ìœ¼ë¡œ íŒì„ í‚¤ìš°ëŠ” íƒ€ì….', tooMuch: 'ê³¼í•˜ë©´ ê°ì •ê¸°ë³µ/ë²ˆì•„ì›ƒì´ ì˜¤ê¸° ì‰½ê³ , ë§ì´ ì•ì„œì„œ ì˜¤í•´ê°€ ìƒê¸¸ ìˆ˜ ìˆì–´.', add: 'ì—ë„ˆì§€ë¥¼ â€œì§§ê³  êµµê²Œâ€ ì“°ê³  íšŒë³µ ë£¨í‹´ì„ ì˜ì‹ì ìœ¼ë¡œ ë„£ì–´ì•¼ í•¨.', routine: 'ì  30ë¶„ ë” + ì¹´í˜ì¸ ì»·ì˜¤í”„(ì˜¤í›„ 2ì‹œ)ë§Œ í•´ë„ ì²´ê° ë‹¬ë¼ì§.' },
                    'í† ': { title: 'í† (åœŸ) ê¸°ìš´', good: 'ì•ˆì •/ì¡°ìœ¨/ì±…ì„ê°ì´ ê°•í•´. íŒ€ì—ì„œ ì¤‘ì‹¬ ì¡ê³  ëê¹Œì§€ ê°€ì ¸ê°€ëŠ” íƒ€ì….', tooMuch: 'ê³¼í•˜ë©´ ìƒê°ì´ ë¬´ê±°ì›Œì§€ê³ , ê²°ì •ì´ ëŠë ¤ì§ˆ ìˆ˜ ìˆì–´(â€œì¼ë‹¨ ë³´ë¥˜â€).', add: 'ì„ íƒì§€ë¥¼ ì¤„ì´ê³  â€œê¸°ì¤€ 1ê°œâ€ë¡œ ë¹¨ë¦¬ ê²°ì •í•˜ëŠ” ì—°ìŠµì´ ì¢‹ìŒ.', routine: 'ê²°ì •í•´ì•¼ í•  ì¼ì€ 10ë¶„ íƒ€ì´ë¨¸ ê±¸ê³  ê²°ë¡  ë‚´ë¦¬ê¸°.' },
                    'ê¸ˆ': { title: 'ê¸ˆ(é‡‘) ê¸°ìš´', good: 'íŒë‹¨/ì •ë¦¬/ê¸°ì¤€ì´ ëšœë ·í•´. ë””í…Œì¼Â·í€„ë¦¬í‹°Â·íš¨ìœ¨ì„ ì±™ê¸°ëŠ” íƒ€ì….', tooMuch: 'ê³¼í•˜ë©´ ë‚ ì¹´ë¡œì›Œ ë³´ì´ê±°ë‚˜ ì™„ë²½ì£¼ì˜ë¡œ ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ì»¤ì§ˆ ìˆ˜ ìˆì–´.', add: 'ì™„ë²½ë³´ë‹¤ â€œì¶œì‹œâ†’ê°œì„ â€ ë£¨í”„ë¡œ ê°€ë©´ ì˜¤íˆë ¤ ì„±ê³¼ê°€ ë¹¨ë¼ì§.', routine: 'To-doì— â€œì´ˆì•ˆ(60%)â€ ë‹¨ê³„ë¥¼ ë”°ë¡œ ë„£ì–´ë´.' },
                    'ìˆ˜': { title: 'ìˆ˜(æ°´) ê¸°ìš´', good: 'ê´€ì°°/ì •ë³´/ê¹Šì´ê°€ ê°•í•´. íë¦„ì„ ì½ê³  ê³µë¶€/ë¶„ì„ìœ¼ë¡œ ì—­ì „í•˜ëŠ” íƒ€ì….', tooMuch: 'ê³¼í•˜ë©´ ìƒê°ì´ ë§ì•„ì ¸ì„œ í–‰ë™ì´ ëŠ¦ì–´ì§ˆ ìˆ˜ ìˆì–´(â€œê³„ì† ì¡°ì‚¬â€).', add: 'ì‘ì€ ì‹¤í–‰ì„ ë¨¼ì € í•˜ê³  ë°ì´í„°ë¡œ ë³´ì™„í•˜ëŠ” ê²Œ ë°¸ëŸ°ìŠ¤ì— ë„ì›€.', routine: 'ì˜¤ëŠ˜ í•  ì¼ 1ê°œëŠ” â€œì¡°ì‚¬ ì—†ì´ ë°”ë¡œ ì‹¤í–‰â€ ë£°ë¡œ í•´ë´.' }
                };
                const s = map[strong] || map['í† '];
                const w = map[weak] || map['ìˆ˜'];

                const deep = [
                    `ê°•í•œ ê¸°ìš´: ${strong} â†’ ${s.good}`,
                    `ì£¼ì˜(ê³¼í•˜ë©´): ${s.tooMuch}`,
                    `ì•½í•œ ê¸°ìš´: ${weak} â†’ ${w.title}ì´ ì•½í•œ í¸ì´ë¼, ${w.add}`
                ].join('\n\n');

                const action = `âœ… ì•¡ì…˜íŒ: ${w.routine}`;

                const deepEl = document.getElementById('elementDeepText');
                const actionEl = document.getElementById('elementActionTip');
                if (deepEl) deepEl.textContent = deep;
                if (actionEl) actionEl.textContent = action;
            }

            // ì„±ê²© ë¶„ì„
            if (analysisData && analysisData.personality) {
                const personality = analysisData.personality;
                document.getElementById('personalityAnalysis').innerHTML = 
                    '<p><strong>' + personality.corePersonality + '</strong></p>' +
                    '<p style="margin-top: 15px;">' + (personality.detailedAnalysis || '').split('\n')[0] + '</p>';
            }

            // MBTI ì—°ë™ ë¶„ì„
            if (userData.mbti && analysisData && analysisData.mbtiSajuFusion) {
                document.getElementById('mbtiSection').style.display = 'block';
                const mbti = analysisData.mbtiSajuFusion;
                document.getElementById('mbtiAnalysis').innerHTML = 
                    '<p><strong>' + userData.mbti + ' Ã— ì‚¬ì£¼ ìœµí•© ë¶„ì„</strong></p>' +
                    '<p style="margin-top: 10px;">' + mbti.compatibility + '</p>' +
                    '<p style="margin-top: 10px;">' + mbti.uniqueness + '</p>';
            }

            // 3) ì‹­ì‹  ë¶„ì„(ì‰¬ìš´ ìš”ì•½)
            if (sajuData && sajuData.tenGods) {
                const tg = sajuData.tenGods;
                const primary = tg.primary || '';
                const secondary = tg.secondary || '';

                const tenMap = {
                    'ë¹„ê²¬': { vibe: 'ë‚´ í˜ì´ìŠ¤/ìê¸°ì£¼ë„', work: 'í˜¼ì ëª°ì…í•˜ëŠ” ì¼, ê°œì¸ ì—­ëŸ‰ ê¸°ë°˜', rel: 'ë™ë“±í•œ ê´€ê³„ì—ì„œ í¸í•¨. ê°„ì„­ ì‹«ì–´í•¨.' },
                    'ê²ì¬': { vibe: 'ìŠ¹ë¶€/ë…ë¦½/ëŒíŒŒ', work: 'ìƒˆ íŒ ì§œê¸°, ê²½ìŸ/ì˜ì—…/ì°½ì—… ê¸°ì§ˆ', rel: 'ì¿¨í•œë° ëœ¨ê±°ì›€. ìì¡´ì‹¬ ì‹¸ì›€ ì£¼ì˜.' },
                    'ì‹ì‹ ': { vibe: 'ê¾¸ì¤€í•¨/ìƒì‚°/ì‹¤í–‰', work: 'ì½˜í…ì¸ /ì œì‘/ê¸°ìˆ , ìŒ“ì•„ì˜¬ë¦¬ëŠ” ì¼', rel: 'ë°°ë ¤í˜•. í‘œí˜„ì´ í˜„ì‹¤ì .' },
                    'ìƒê´€': { vibe: 'í‘œí˜„/ê°œì„±/ì§ì„¤', work: 'ê¸°íš/ë§ˆì¼€íŒ…/í¬ë¦¬ì—ì´í‹°ë¸Œ, ë§ë¡œ ë¨¹ê³ ì‚¬ëŠ”', rel: 'ë§¤ë ¥ ê°•í•œë° íŒ©í­ ì¡°ì ˆ í•„ìš”.' },
                    'ì •ì¬': { vibe: 'ì•ˆì •/ê´€ë¦¬/í˜„ì‹¤ê°', work: 'ìš´ì˜/íšŒê³„/PM, ëˆê´€ë¦¬ ì˜í•¨', rel: 'ì‹ ë¢° ìŒ“ëŠ” ì—°ì• . ê³„íší˜•.' },
                    'í¸ì¬': { vibe: 'ê¸°íšŒ/í™•ì¥/ì‚¬êµ', work: 'ì˜ì—…/íˆ¬ì/ì‚¬ì—…, íŒ í‚¤ìš°ê¸°', rel: 'ìŠ¤ì¼€ì¼ í° ì—°ì• . ì¶©ë™ì§€ì¶œ ì£¼ì˜.' },
                    'ì •ê´€': { vibe: 'ê·œì¹™/ì±…ì„/ì„±ì‹¤', work: 'ì¡°ì§/ê³µê³µ/ë¦¬ë”ì‹­, ë§¡ì€ ì¼ ëê¹Œì§€', rel: 'ì•½ì† ì¤‘ìš”. ì•ˆì •ì ì¸ ê´€ê³„ ì„ í˜¸.' },
                    'í¸ê´€': { vibe: 'ì¹´ë¦¬ìŠ¤ë§ˆ/ê²°ë‹¨/ì••ë°•', work: 'ìœ„ê¸°ê´€ë¦¬/ìŠ¹ë¶€ì²˜ ê°•í•¨, ê°•í•œ ë¦¬ë”', rel: 'ëŒê³  ê°€ëŠ” íƒ€ì…. ê³ ì§‘/ê°•ì•• ì£¼ì˜.' },
                    'ì •ì¸': { vibe: 'í•™ìŠµ/ì •ë¦¬/ë³´í˜¸', work: 'ì—°êµ¬/ë¶„ì„/ê¸°íš, ê³µë¶€ë¡œ ì—­ì „', rel: 'ë”°ëœ»í•œë° í˜¼ì íšŒë³µ ì‹œê°„ í•„ìš”.' },
                    'í¸ì¸': { vibe: 'ì§ê°/íŠ¹ì´ì /ëª°ì…', work: 'ë…íŠ¹í•œ ì „ë¬¸ì„±, í•œë°©ì˜ ì•„ì´ë””ì–´', rel: 'ì·¨í–¥ í™•ê³ . ì´í•´ë°›ìœ¼ë©´ ê¹Šê²Œ ê°.' }
                };

                const p = tenMap[primary] || tenMap['ì •ê´€'];
                const s = tenMap[secondary] || tenMap['ë¹„ê²¬'];

                const html = `
                    <p style="font-weight:900;">ğŸ”¥ í•µì‹¬ ìºë¦­í„°: <span class="mono">${primary || 'ì •ê´€'}</span> + <span class="mono">${secondary || 'ë¹„ê²¬'}</span></p>
                    <p style="margin-top:12px; color:#374151; line-height:1.65;">
                        <strong>í•œ ì¤„ ìš”ì•½:</strong> ${p.vibe} ì„±í–¥ì´ ê¸°ë³¸ì´ê³ , ${s.vibe} ê¸°ì§ˆì´ ë³´ì¡°ë¡œ ê¹”ë ¤ìˆì–´.
                    </p>
                    <p style="margin-top:10px; color:#374151; line-height:1.65;">
                        <strong>ì¼/ì»¤ë¦¬ì–´:</strong> ${p.work}
                    </p>
                    <p style="margin-top:10px; color:#374151; line-height:1.65;">
                        <strong>ì—°ì• /ê´€ê³„:</strong> ${p.rel}
                    </p>
                    <p style="margin-top:12px; font-weight:800; color:#4c1d95;">âœ… ì•¡ì…˜íŒ: ${primary} ê¸°ìš´ì€ â€œì¥ì ì´ ê³¼í•˜ë©´ ë‹¨ì â€ì´ ë¼. ì˜¤ëŠ˜ì€ í•œ ê°€ì§€(ë§/ëˆ/ê²°ì •)ë§Œ â€˜ì¡°ì ˆâ€™í•´ë´.</p>
                `;

                const el = document.getElementById('tenGodsAnalysis');
                if (el) el.innerHTML = html;
            }

            // ìš©ì‹ /ê¸°ì‹  ë¶„ì„
            if (sajuData && sajuData.yongsinGisin) {
                const yg = sajuData.yongsinGisin;
                document.getElementById('yongsinAnalysis').innerHTML = 
                    '<p><strong>ğŸŒŸ ìš©ì‹ (ç”¨ç¥): ' + yg.yongsin + '</strong> - ë‹¹ì‹ ì—ê²Œ ë„ì›€ì´ ë˜ëŠ” ê¸°ìš´ì…ë‹ˆë‹¤.</p>' +
                    '<p style="margin-top: 10px;"><strong>âš ï¸ ê¸°ì‹ (å¿Œç¥): ' + yg.gisin + '</strong> - ì£¼ì˜í•´ì•¼ í•  ê¸°ìš´ì…ë‹ˆë‹¤.</p>' +
                    '<p style="margin-top: 15px;">' + yg.yongsin + ' ê¸°ìš´ì„ ì ê·¹ í™œìš©í•˜ê³ , ' + yg.gisin + ' ê¸°ìš´ì€ ì ì ˆíˆ ì¡°ì ˆí•˜ì—¬ ê· í˜•ì„ ë§ì¶”ì„¸ìš”.</p>';
            }

            // ë§ì¶¤ ì¡°ì–¸
            document.getElementById('loveAdvice').textContent = 
                analysisData?.compatibilityAnalysis?.romantic?.general || 
                'ì„œë¡œì˜ ì°¨ì´ì ì„ ì¸ì •í•˜ê³  ì¡´ì¤‘í•˜ëŠ” ê´€ê³„ê°€ ì¢‹ìŠµë‹ˆë‹¤.';
            
            document.getElementById('careerAdvice').textContent = 
                analysisData?.careerGuidance?.aptitude?.substring(0, 100) || 
                'ê¾¸ì¤€í•œ ë…¸ë ¥ê³¼ ë°œì „ì´ ì¢‹ì€ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¬ ê²ƒì…ë‹ˆë‹¤.';
            
            document.getElementById('wealthAdvice').textContent = 
                'ê³„íšì ì¸ ì¬ì • ê´€ë¦¬ì™€ ì‹ ì¤‘í•œ íˆ¬ìë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.';
            
            document.getElementById('healthAdvice').textContent = 
                analysisData?.healthAnalysis?.recommendations?.lifestyle || 
                'ê·œì¹™ì ì¸ ìƒí™œê³¼ ì ì ˆí•œ ìš´ë™ìœ¼ë¡œ ê±´ê°•ì„ ìœ ì§€í•˜ì„¸ìš”.';
        }

        // í´ë°± ê²°ê³¼ (ì—”ì§„ ë¡œë“œ ì‹¤íŒ¨ì‹œ)
        function displayFallbackResults(userData) {
            document.getElementById('reportTitle').textContent = userData.name + 'ë‹˜ì˜ ì‚¬ì£¼ ë¶„ì„ ê²°ê³¼';
            document.getElementById('userInfo').textContent = 
                (userData.gender === 'M' ? 'ë‚¨ì„±' : 'ì—¬ì„±') + ' Â· ' +
                userData.year + 'ë…„ ' + userData.month + 'ì›” ' + userData.day + 'ì¼ìƒ';

            // ê¸°ë³¸ ì ìˆ˜
            const baseScore = (userData.year + userData.month + userData.day) % 20 + 75;
            document.getElementById('totalScore').textContent = baseScore;
            document.getElementById('headerLoveScore').textContent = baseScore - 2;
            document.getElementById('headerCareerScore').textContent = baseScore + 1;
            document.getElementById('headerWealthScore').textContent = baseScore - 1;

            document.getElementById('loveScore').textContent = baseScore - 2;
            document.getElementById('careerScore').textContent = baseScore + 1;
            document.getElementById('wealthScore').textContent = baseScore - 1;
            document.getElementById('healthScore').textContent = baseScore;

            document.getElementById('personalityAnalysis').innerHTML = 
                '<p>ë‹¹ì‹ ì€ ë…íŠ¹í•œ ë§¤ë ¥ê³¼ ì ì¬ë ¥ì„ ê°€ì§„ ë¶„ì…ë‹ˆë‹¤. ìì‹ ë§Œì˜ ê°•ì ì„ ë°œíœ˜í•˜ì—¬ ëª©í‘œë¥¼ í–¥í•´ ë‚˜ì•„ê°€ì„¸ìš”.</p>';
        }

        // ê²°ê³¼ ê³µìœ 
        function shareResult() {
            const url = window.location.href;
            
            if (navigator.share) {
                navigator.share({
                    title: 'ğŸ”® AI ì‚¬ì£¼ Ã— MBTI ë¶„ì„ ê²°ê³¼',
                    text: 'ë‚˜ì˜ ì‚¬ì£¼ ë¶„ì„ ê²°ê³¼ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”!',
                    url: url
                }).catch(function() {
                    copyToClipboard(url);
                });
            } else {
                copyToClipboard(url);
            }
        }

        function copyToClipboard(text) {
            if (navigator.clipboard) {
                navigator.clipboard.writeText(text).then(function() {
                    alert('ğŸ“‹ ë§í¬ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
                });
            } else {
                prompt('ë§í¬ë¥¼ ë³µì‚¬í•˜ì„¸ìš”:', text);
            }
        }
    </script>
</body>
</html>
